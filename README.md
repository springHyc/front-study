## ç”Ÿå‘½å‘¨æœŸ

ç°åœ¨æµè¡Œçš„å‰ç«¯æ¡†æ¶ï¼Œæ— è®ºæ˜¯ angular è¿˜æ˜¯ Reactï¼Œåˆæˆ–æ˜¯ Angular2 ä»¥åŠä»¥ä¸Šï¼Œéƒ½ç”±æ¡†æ¶è‡ªèº«æä¾›äº†ç”Ÿå‘½å‘¨æœŸï¼ˆæœ‰çš„å«ç”Ÿå‘½å‘¨æœŸé’©å­ï¼‰ä¾›å¼€å‘è€…ä½¿ç”¨ã€‚

ä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹ä¸Šé¢å‡ ä¸ªæ¡†æ¶çš„ç”Ÿå‘½å‘¨æœŸï¼š

Vue ç”Ÿå‘½å‘¨æœŸ:
![Vue-lifecycle](https://upload-images.jianshu.io/upload_images/2041009-37526705b33a353d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

Angular ç”Ÿå‘½å‘¨æœŸ:
| Hook | Purpose and Timing |
---| ---
| `ngOnChanges()` | Angularï¼ˆé‡æ–°ï¼‰è®¾ç½®æ•°æ®ç»‘å®šè¾“å…¥å±æ€§æ—¶çš„å“åº”ã€‚è¯¥æ–¹æ³•æ¥æ”¶`[SimpleChanges](https://angular.io/api/core/SimpleChanges)`å½“å‰å’Œå…ˆå‰å±æ€§å€¼çš„å¯¹è±¡ã€‚`ngOnInit()`åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®ç»‘å®šè¾“å…¥å±æ€§å‘ç”Ÿæ›´æ”¹ Â  ä¹‹å‰å’Œä¹‹åè°ƒç”¨ã€‚|
| `ngOnInit()` | åœ¨ Angular é¦–æ¬¡æ˜¾ç¤ºæ•°æ®ç»‘å®šå±æ€§å¹¶è®¾ç½®æŒ‡ä»¤/ç»„ä»¶çš„è¾“å…¥å±æ€§ååˆå§‹åŒ–æŒ‡ä»¤/ç»„ä»¶ã€‚åœ¨ç¬¬ä¸€æ¬¡ä¹‹å è°ƒç”¨ä¸€æ¬¡ã€‚ ngOnChanges()|
| `ngDoCheck()` | æ£€æµ‹ Angular æ— æ³•æˆ–ä¸ä¼šè‡ªè¡Œæ£€æµ‹çš„æ›´æ”¹å¹¶å¯¹å…¶è¿›è¡Œæ“ä½œã€‚åœ¨æ¯æ¬¡æ›´æ”¹æ£€æµ‹è¿è¡ŒæœŸé—´ï¼Œåœ¨ ngOnChanges()å’Œä¹‹åç«‹å³è°ƒç”¨ ngOnInit()ã€‚ |
| `[ngAfterContentInit()]` | åœ¨ Angular å°†å¤–éƒ¨å†…å®¹æŠ•å½±åˆ°ç»„ä»¶çš„è§†å›¾/æŒ‡ä»¤æ‰€åœ¨çš„è§†å›¾åè¿›è¡Œå“åº”ã€‚åœ¨ç¬¬ä¸€æ¬¡ä¹‹å è°ƒç”¨ä¸€æ¬¡ ngDoCheck()ã€‚|
| `ngAfterContentChecked()` | åœ¨ Angular æ£€æŸ¥æŠ•å°„åˆ°æŒ‡ä»¤/ç»„ä»¶ä¸­çš„å†…å®¹åå“åº”ã€‚åœ¨`[ngAfterContentInit()](https://angular.io/api/router/RouterLinkActive#ngAfterContentInit)`éšåå’Œéšåçš„æ¯ä¸€æ¬¡è°ƒç”¨ä¹‹å`ngDoCheck()`ã€‚|
| `[ngAfterViewInit()]` | åœ¨ Angular åˆå§‹åŒ–ç»„ä»¶çš„è§†å›¾å’Œå­è§†å›¾/æŒ‡ä»¤æ‰€åœ¨çš„è§†å›¾åå“åº”ã€‚åœ¨ç¬¬ä¸€æ¬¡ä¹‹å è°ƒç”¨ä¸€æ¬¡ ngAfterContentChecked()ã€‚|
| `ngAfterViewChecked()` | åœ¨ Angular æ£€æŸ¥ç»„ä»¶çš„è§†å›¾å’Œå­è§†å›¾/æŒ‡ä»¤æ‰€åœ¨çš„è§†å›¾åå“åº”ã€‚åœ¨`[ngAfterViewInit()]`éšåå’Œéšåçš„æ¯ä¸€æ¬¡è°ƒç”¨ä¹‹å`ngAfterContentChecked()`ã€‚|
| `ngOnDestroy()` | å°±åœ¨ Angular ç ´åæŒ‡ä»¤/ç»„ä»¶ä¹‹å‰è¿›è¡Œæ¸…ç†ã€‚å–æ¶ˆè®¢é˜… Observable å¹¶åˆ†ç¦»äº‹ä»¶å¤„ç†ç¨‹åºä»¥é¿å…å†…å­˜æ³„æ¼ã€‚åœ¨ Angular ç ´åæŒ‡ä»¤/ç»„ä»¶ä¹‹å‰ è°ƒç”¨ã€‚|

React ç”Ÿå‘½å‘¨æœŸï¼ˆ16.0 ä¹‹å‰ï¼‰ï¼š
![React-Lifecycle1](https://upload-images.jianshu.io/upload_images/2041009-8194a8dee1922c66.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![React-Lifecycle2](https://upload-images.jianshu.io/upload_images/2041009-904a35dd49de5aad.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

React ç”Ÿå‘½å‘¨æœŸï¼ˆ16.0 åï¼‰ï¼š

![React-Lifecycle3](https://upload-images.jianshu.io/upload_images/2041009-ae6e23d14d1cb742.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

æˆ‘ä»¬ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼ŒReact ä»£ç ä¸­æ˜¯å¦‚ä½•ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸçš„ã€‚

```js
class Demo extends React.Component {
  constructor(props) {
    super(props);
  }

  componentDidMount() {
    this.fetchList();
  }

  fetchList() {}

  render() {
    return <span>demo page</span>;
  }
}
```

æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨ react ä¸­ï¼Œæœ‰ä¸¤ç§ç±»å‹çš„ç»„ä»¶ï¼Œfunction ç»„ä»¶å’Œ class ç»„ä»¶ã€‚å…¶ä¸­ class ç±»ä¸ä»…å…è®¸å†…éƒ¨çŠ¶æ€(`state`)çš„å­˜åœ¨ï¼Œè¿˜æœ‰å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚

å‰é¢è¯´åˆ° class ç±»ç»„ä»¶æœ‰å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚è¿™äº›ç”Ÿå‘½å‘¨æœŸé’©å­æ˜¯ä»å“ªæ¥çš„å‘¢ï¼Ÿæ¯•ç«Ÿ class ç±»ç»„ä»¶å°±æ˜¯åŸç”Ÿçš„ class ç±»å†™æ³•ã€‚

å…¶å® React å†…ç½®äº†ä¸€ä¸ª Component ç±»ï¼Œç”Ÿå‘½å‘¨æœŸé’©å­éƒ½æ˜¯ä»å®ƒè¿™é‡Œæ¥çš„ï¼Œéº»çƒ¦çš„åœ°æ–¹å°±æ˜¯æ¯æ¬¡éƒ½è¦ç»§æ‰¿ã€‚

ç»¼åˆä»¥ä¸Šçš„å¯¹æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œç”Ÿå‘½å‘¨æœŸçš„å‡ºç°ï¼Œä¸»è¦æ˜¯ä¸ºäº†ä¾¿äºå¼€å‘&&æ›´å¥½çš„å¼€å‘ã€‚

React ç”Ÿå‘½å‘¨æœŸä½¿ç”¨å°æç¤ºï¼š

> 1. getDerivedStateFromProps è¢« React å®˜æ–¹å½’ç±»ä¸ºä¸å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œèƒ½ä¸ç”¨å°±å°½é‡ä¸ç”¨ï¼Œå‰é¢ç”¨é‚£ä¹ˆå¤šç¯‡å¹…è®²è¿™ä¸ªç”Ÿå‘½å‘¨æœŸä¸»è¦æ˜¯ä¸ºäº†åŠ æ·±å¯¹ Reac è¿è¡Œæœºåˆ¶çš„ç†è§£ã€‚
> 2. unsafe

> ä¸‹é¢å¼€å§‹å’±ä»¬ä»Šå¤©çš„ä¸»é¢˜ Hooksã€‚

## Hooks

React v16.7.0-alpha ä¸­ç¬¬ä¸€æ¬¡å¼•å…¥äº† Â [Hooks](https://reactjs.org/docs/hooks-intro.html)Â  çš„æ¦‚å¿µï¼Œ ä¸ºä»€ä¹ˆè¦å¼•å…¥è¿™ä¸ªä¸œè¥¿å‘¢ï¼Ÿ

æœ‰ä¸¤ä¸ªåŸå› ï¼š

1.  React å®˜æ–¹è§‰å¾— class ç»„ä»¶å¤ªéš¾ä»¥ç†è§£ï¼ŒOOï¼ˆé¢å‘å¯¹è±¡ï¼‰å¤ªéš¾æ‡‚äº†
2.  React å®˜æ–¹è§‰å¾— ï¼Œ React ç”Ÿå‘½å‘¨æœŸå¤ªéš¾ç†è§£ã€‚

æœ€ç»ˆç›®çš„å°±æ˜¯ï¼Œ å¼€å‘è€…ä¸ç”¨å»ç†è§£ classï¼Œ ä¹Ÿä¸ç”¨æ“å¿ƒç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚

ä½†æ˜¯ React å®˜æ–¹åˆè¯´ï¼Œ Hooks çš„ç›®çš„å¹¶ä¸æ˜¯æ¶ˆç­ç±»ç»„ä»¶ã€‚

> æ­¤å¤„è¡¨ç¤º ğŸ˜‘

ä½†æ— è®ºå¦‚ä½•ï¼Œæ—¢ç„¶ react å®˜æ–¹è¿™æ ·è¯´äº†ï¼Œé‚£å’±ä»¬å°±æ¥äº†è§£ä¸€ä¸‹è¿™ä¸ª Hooksã€‚

### 1. API

æˆ‘ä»¬æ¥çœ‹ä¸‹ Hooks çš„ APIï¼Œä¸‹é¢æ˜¯[å®˜ç½‘](https://reactjs.org/docs/hooks-reference.html)ä¸Šçš„æˆªå›¾ï¼š
![image.png](https://upload-images.jianshu.io/upload_images/2041009-ea81de82513c3eff.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

ä¹ä¸€çœ‹è¿˜æ˜¯æŒºå¤šçš„ï¼Œ å…¶å®æœ‰å¾ˆå¤šçš„ Hook è¿˜å¤„åœ¨å®éªŒé˜¶æ®µï¼Œå¾ˆå¯èƒ½æœ‰ä¸€éƒ¨åˆ†è¦è¢«ç æ‰ï¼Œ ç›®å‰å¤§å®¶åªéœ€è¦ç†Ÿæ‚‰çš„ï¼Œ ä¸‰ä¸ªå°±å¤Ÿäº†ï¼š

- useState
- useEffect
- useContext

#### 1.1 useState

> çœ‹ä¾‹å­ - hooksdemo

è¿›å»å°±è°ƒç”¨äº† useStateï¼Œ ä¼ å…¥ 0ï¼Œå¯¹ state è¿›è¡Œåˆå§‹åŒ–ï¼Œæ­¤æ—¶ count å°±æ˜¯ 0ï¼Œ è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œ ç¬¬ä¸€ä¸ªå…ƒç´ å°±æ˜¯ state çš„å€¼ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯æ›´æ–° state çš„å‡½æ•°ã€‚

```js
// ä¸‹é¢ä»£ç ç­‰åŒäºï¼š const [count, setCount] = useState(0);
const result = useState(0);
const count = result[0];
const setCount = result[1];
```

åˆ©ç”¨ count å¯ä»¥è¯»å–åˆ°è¿™ä¸ª stateï¼Œåˆ©ç”¨ setCount å¯ä»¥æ›´æ–°è¿™ä¸ª stateï¼Œè€Œä¸”æˆ‘ä»¬å®Œå…¨å¯ä»¥æ§åˆ¶è¿™ä¸¤ä¸ªå˜é‡çš„å‘½åï¼Œåªè¦é«˜å…´ï¼Œä½ å®Œå…¨å¯ä»¥è¿™ä¹ˆå†™:

```js
const [theCount, updateCount] = useState(0);
```

å› ä¸º useState åœ¨ Counter è¿™ä¸ªå‡½æ•°ä½“ä¸­ï¼Œæ¯æ¬¡ Counter è¢«æ¸²æŸ“çš„æ—¶å€™ï¼Œè¿™ä¸ª useState è°ƒç”¨éƒ½ä¼šè¢«æ‰§è¡Œï¼ŒuseState è‡ªå·±è‚¯å®šä¸æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œå› ä¸ºå®ƒè¦åŒºåˆ†ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼ˆç»„ä»¶è¢« mount æ—¶ï¼‰å’Œåç»­è°ƒç”¨ï¼ˆé‡å¤æ¸²æŸ“æ—¶ï¼‰ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡æ‰ç”¨å¾—ä¸Šå‚æ•°çš„åˆå§‹å€¼ï¼Œè€Œåç»­çš„è°ƒç”¨å°±è¿”å›â€œè®°ä½â€çš„ state å€¼ã€‚

> çœ‹åˆ°è¿™é‡Œï¼Œå¿ƒé‡Œå¯èƒ½ä¼šæœ‰è¿™æ ·çš„ç–‘é—®ï¼šå¦‚æœç»„ä»¶ä¸­å¤šæ¬¡ä½¿ç”¨ useState æ€ä¹ˆåŠï¼ŸReact å¦‚ä½•â€œè®°ä½â€å“ªä¸ªçŠ¶æ€å¯¹åº”å“ªä¸ªå˜é‡ï¼Ÿ

React æ˜¯å®Œå…¨æ ¹æ® useState çš„è°ƒç”¨é¡ºåºæ¥â€œè®°ä½â€çŠ¶æ€å½’å±çš„ï¼Œå‡è®¾ç»„ä»¶ä»£ç å¦‚ä¸‹ï¼š

```js
const Counter = () => {
  const [count, setCount] = useState(0);
  const [foo, updateFoo] = useState("foo");

  // ...
};
```

æ¯ä¸€æ¬¡ Counter è¢«æ¸²æŸ“ï¼Œéƒ½æ˜¯ç¬¬ä¸€æ¬¡ useState è°ƒç”¨è·å¾— count å’Œ setCountï¼Œç¬¬äºŒæ¬¡ useState è°ƒç”¨è·å¾— foo å’Œ updateFooï¼ˆè¿™é‡Œæˆ‘æ•…æ„è®©å‘½åä¸ç”¨ set å‰ç¼€ï¼Œå¯è§å‡½æ•°åå¯ä»¥éšæ„ï¼‰ã€‚

React æ˜¯æ¸²æŸ“è¿‡ç¨‹ä¸­çš„â€œä¸Šå¸â€ï¼Œæ¯ä¸€æ¬¡æ¸²æŸ“ Counter éƒ½è¦ç”± React å‘èµ·ï¼Œæ‰€ä»¥å®ƒæœ‰æœºä¼šå‡†å¤‡å¥½ä¸€ä¸ª**å†…å­˜è®°å½•**ï¼Œå½“å¼€å§‹æ‰§è¡Œçš„æ—¶å€™ï¼Œæ¯ä¸€æ¬¡ useState è°ƒç”¨å¯¹åº”å†…å­˜è®°å½•ä¸Šä¸€ä¸ªä½ç½®ï¼Œè€Œä¸”æ˜¯æŒ‰ç…§é¡ºåºæ¥è®°å½•çš„ã€‚React ä¸çŸ¥é“ä½ æŠŠ useState ç­‰ Hooks API è¿”å›çš„ç»“æœèµ‹å€¼ç»™ä»€ä¹ˆå˜é‡ï¼Œä½†æ˜¯å®ƒä¹Ÿä¸éœ€è¦çŸ¥é“ï¼Œå®ƒåªéœ€è¦æŒ‰ç…§ useState è°ƒç”¨é¡ºåºè®°å½•å°±å¥½äº†ã€‚

ä½ å¯ä»¥ç†è§£ä¸ºä¼šæœ‰ä¸€ä¸ªæ§½å»è®°å½•çŠ¶æ€ã€‚

æ­£å› ä¸ºè¿™ä¸ªåŸå› ï¼Œ**Hooksï¼Œåƒä¸‡ä¸è¦åœ¨ if è¯­å¥æˆ–è€… for å¾ªç¯è¯­å¥ä¸­ä½¿ç”¨ï¼**

åƒä¸‹é¢çš„ä»£ç ï¼Œè‚¯å®šä¼šå‡ºä¹±å­çš„ï¼š

```js
const Counter = () => {
  const [count, setCount] = useState(0);
  if (count % 2 === 0) {
    const [foo, updateFoo] = useState("foo");
  }
  const [bar, updateBar] = useState("bar");
  // ...
};
```

å› ä¸ºæ¡ä»¶åˆ¤æ–­ï¼Œè®©æ¯æ¬¡æ¸²æŸ“ä¸­ useState çš„è°ƒç”¨æ¬¡åºä¸ä¸€è‡´äº†ï¼Œäºæ˜¯ React å°±é”™ä¹±äº†ã€‚

#### 1.2 useEffect

é™¤äº† useStateï¼ŒReact è¿˜æä¾› useEffectï¼Œç”¨äºæ”¯æŒç»„ä»¶ä¸­å¢åŠ å‰¯ä½œç”¨çš„æ”¯æŒã€‚

åœ¨ React ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸­å¦‚æœè¦åšæœ‰å‰¯ä½œç”¨çš„æ“ä½œï¼Œä»£ç æ”¾åœ¨å“ªé‡Œï¼Ÿ

å¦‚æœæ‚¨ä¹‹å‰ç¼–å†™è¿‡ React ç±»ç»„ä»¶ï¼Œåˆ™åº”ç†Ÿæ‚‰ componentDidMountï¼ŒcomponentDidUpdate å’Œ componentWillUnmount ç­‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚è¿™å‰¯ä½œç”¨çš„ä»£ç å°±æ”¾åœ¨è¿™é‡Œã€‚

useEffect Hook æ˜¯è¿™ä¸‰ç§ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ç»„åˆã€‚

useEffect å½“ç»„ä»¶ç¬¬ä¸€æ¬¡å®ŒæˆåŠ è½½æ—¶è¿è¡Œä¸€æ¬¡ï¼Œç„¶åæ¯æ¬¡æ›´æ–°ç»„ä»¶çŠ¶æ€æ—¶è¿è¡Œä¸€æ¬¡ã€‚å› ä¸ºæŒ‰é’®å•å‡»æ­£åœ¨ä¿®æ”¹çŠ¶æ€ï¼Œå³ç»„ä»¶ useEffect æ–¹æ³•è¿è¡Œã€‚

åœ¨ Counter ç»„ä»¶ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨ç”¨æˆ·ç‚¹å‡»â€œ+â€æˆ–è€…â€œ-â€æŒ‰é’®ä¹‹åæŠŠè®¡æ•°å€¼ä½“ç°åœ¨ç½‘é¡µæ ‡é¢˜ä¸Šï¼Œè¿™å°±æ˜¯ä¸€ä¸ªä¿®æ”¹ DOM çš„å‰¯ä½œç”¨æ“ä½œï¼Œæ‰€ä»¥å¿…é¡»æŠŠ Counter å†™æˆ classï¼Œè€Œä¸”æ·»åŠ ä¸‹é¢çš„ä»£ç ï¼š

```js
componentDidMount() {
  document.title = `Count: ${this.state.count}`;
}

componentDidUpdate() {
  document.title = `Count: ${this.state.count}`;
}
```

è€Œæœ‰äº† useEffectï¼Œæˆ‘ä»¬å°±ä¸ç”¨å†™ä¸€ä¸ª class äº†ï¼Œå¯¹åº”ä»£ç å¦‚ä¸‹ï¼š

```js
import { useState, useEffect } from "react";

const Counter = () => {
  const [count, setCount] = useState(0);

  useEffect(() => {
    document.title = `Count: ${this.state.count}`;
  });

  return (
    <div>
      <div>{count}</div>
      <button onClick={() => setCount(count + 1)}>+</button>
      <button onClick={() => setCount(count - 1)}>-</button>
    </div>
  );
};
```

seEffect çš„å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç»„ä»¶æ¯æ¬¡æ¸²æŸ“ä¹‹åï¼Œéƒ½ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°å‚æ•°ï¼Œè¿™æ ·å°±è¾¾åˆ°äº† componentDidMount å’Œ componentDidUpdate ä¸€æ ·çš„æ•ˆæœã€‚

è™½ç„¶æœ¬è´¨ä¸Šï¼Œä¾ç„¶æ˜¯ componentDidMount å’Œ componentDidUpdate ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸè¢«è°ƒç”¨ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬å…³å¿ƒçš„ä¸æ˜¯ mount æˆ–è€… update è¿‡ç¨‹ï¼Œè€Œæ˜¯â€œafter renderâ€äº‹ä»¶ï¼ŒuseEffect å°±æ˜¯å‘Šè¯‰ç»„ä»¶åœ¨â€œæ¸²æŸ“å®Œâ€ä¹‹ååšç‚¹ä»€ä¹ˆäº‹ã€‚

è¯»è€…å¯èƒ½ä¼šé—®ï¼Œç°åœ¨æŠŠ componentDidMount å’Œ componentDidUpdate æ··åœ¨äº†ä¸€èµ·ï¼Œé‚£å‡å¦‚æŸä¸ªåœºæ™¯ä¸‹æˆ‘åªåœ¨ mount æ—¶åšäº‹ä½† update ä¸åšäº‹ï¼Œç”¨ useEffect ä¸å°±ä¸è¡Œäº†å—ï¼Ÿ

å…¶å®ï¼Œç”¨ä¸€ç‚¹å°æŠ€å·§å°±å¯ä»¥è§£å†³ã€‚useEffect è¿˜æ”¯æŒç¬¬äºŒä¸ªå¯é€‰å‚æ•°ï¼Œåªæœ‰åŒä¸€ useEffect çš„ä¸¤æ¬¡è°ƒç”¨ç¬¬äºŒä¸ªå‚æ•°ä¸åŒæ—¶ï¼Œç¬¬ä¸€ä¸ªå‡½æ•°å‚æ•°æ‰ä¼šè¢«è°ƒç”¨. æ‰€ä»¥ï¼Œå¦‚æœæƒ³æ¨¡æ‹Ÿ componentDidMountï¼Œåªéœ€è¦è¿™æ ·å†™ï¼š

```js
useEffect(() => {
  // è¿™é‡Œåªæœ‰mountæ—¶æ‰è¢«è°ƒç”¨ï¼Œç›¸å½“äºcomponentDidMount
}, [123]);
```

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒuseEffect çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ [123]ï¼Œå…¶å®ä¹Ÿå¯ä»¥æ˜¯ä»»ä½•ä¸€ä¸ªå¸¸æ•°ï¼Œå› ä¸ºå®ƒæ°¸è¿œä¸å˜ï¼Œæ‰€ä»¥ useEffect åªåœ¨ mount æ—¶è°ƒç”¨ç¬¬ä¸€ä¸ªå‡½æ•°å‚æ•°ä¸€æ¬¡ï¼Œè¾¾åˆ°äº† componentDidMount ä¸€æ ·çš„æ•ˆæœã€‚

#### 1.3 useContext - ç”¨åˆ°çš„å¾ˆå¥½ï¼Œæš‚æ—¶ä¸åšä»‹ç»

React Context API å¤§å®¶éƒ½å¾ˆå°‘ç”¨åˆ°ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å»äº†è§£ä¸€ä¸‹ã€‚

### 2. ç®€ä»‹

ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº† useStateã€useEffect ä¸¤ä¸ªæœ€åŸºæœ¬çš„ Hooksï¼Œå¯ä»¥æ„Ÿå—åˆ°ï¼ŒHooks å°†å¤§å¤§ç®€åŒ–ä½¿ç”¨ React çš„ä»£ç ã€‚

é¦–å…ˆæˆ‘ä»¬å¯èƒ½ä¸å†éœ€è¦ class äº†ï¼Œè™½ç„¶ React å®˜æ–¹è¡¨ç¤º class ç±»å‹çš„ç»„ä»¶å°†ç»§ç»­æ”¯æŒï¼Œä½†æ˜¯ï¼Œä¸šç•Œå·²ç»æ™®éè¡¨ç¤ºä¼šè¿ç§»åˆ° Hooks å†™æ³•ä¸Šï¼Œä¹Ÿå°±æ˜¯æ”¾å¼ƒ classï¼Œåªç”¨å‡½æ•°å½¢å¼æ¥ç¼–å†™ç»„ä»¶ã€‚

Hooks å‘å¸ƒåï¼Œ ä¼šå¸¦æ¥ä»€ä¹ˆæ ·çš„æ”¹å˜å‘¢ï¼Ÿ æ¯«æ— ç–‘é—®ï¼Œ æœªæ¥çš„ç»„ä»¶ï¼Œ æ›´å¤šçš„å°†ä¼šæ˜¯å‡½æ•°å¼ç»„ä»¶ã€‚

## å‚è€ƒ

- https://zh-hans.reactjs.org/docs/thinking-in-react.html
- https://angular.io/guide/lifecycle-hooks
- https://cn.vuejs.org/v2/guide/instance.html#%E5%AE%9E%E4%BE%8B%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90
- http://react-china.org/t/react-v16-7-0-alpha-hooks/26839
- [react ç”Ÿå‘½å‘¨æœŸå„ç‰ˆæœ¬å¯¹æ¯”](https://www.cnblogs.com/erbingbing/p/10211495.html)
- [React v15 åˆ° v16.3, v16.4 æ–°ç”Ÿå‘½å‘¨æœŸæ€»ç»“ä»¥åŠä½¿ç”¨åœºæ™¯](https://blog.csdn.net/Napoleonxxx/article/details/81120854)
- [React ç”Ÿå‘½å‘¨æœŸå›¾](http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/)
- [å…¨é¢äº†è§£ React æ–°åŠŸèƒ½: Suspense å’Œ Hooks](https://segmentfault.com/a/1190000017483690)
